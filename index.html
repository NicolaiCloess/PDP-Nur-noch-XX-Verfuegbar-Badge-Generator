<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopify Stock Alert Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.2em;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 45% 1fr;
            gap: 20px;
            margin-bottom: 30px;
            min-width: 0;
        }

        .editor-panel {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-width: 0;
            overflow-wrap: break-word;
        }

        .preview-panel {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-width: 0;
            overflow-wrap: break-word;
            position: sticky;
            top: 20px;
            align-self: start;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }

        .panel-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #2c3e50;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
        }

        .form-section {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }

        .form-section h3 {
            color: #007bff;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #555;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #007bff;
        }

        .color-input {
            width: 60px !important;
            height: 40px !important;
            padding: 0 !important;
            border: none !important;
            border-radius: 6px;
            cursor: pointer;
        }

        .preview-area {
            min-height: 150px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px dashed #dee2e6;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .stock-example {
            margin-bottom: 15px;
        }

        .code-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-top: 20px;
        }

        .code-container {
            background: #1a202c;
            color: #a0aec0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            line-height: 1.5;
            position: relative;
            margin-top: 15px;
            border: 1px solid #2d3748;
            min-width: 0;
            max-height: 600px;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .code-container pre {
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-wrap: break-word;
            padding-right: 50px;
        }

        .copy-button {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #4299e1;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(66, 153, 225, 0.3);
        }

        .copy-button:hover {
            background: #3182ce;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(66, 153, 225, 0.4);
        }

        .copy-button:active {
            transform: translateY(0);
        }

        .copy-button.copied {
            background: #38a169;
            box-shadow: 0 2px 4px rgba(56, 161, 105, 0.3);
        }

        .info-box {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .info-box h4 {
            color: #0066cc;
            margin-bottom: 8px;
        }

        .info-box p {
            color: #004499;
            margin-bottom: 5px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üö® Stock Alert Generator</h1>
            <p>Erstelle "Nur noch XX verf√ºgbar" Alerts f√ºr deine Shopify Produktseiten</p>
        </div>

        <div class="main-content">
            <div class="editor-panel">
                <h2 class="panel-title">‚öôÔ∏è Einstellungen</h2>

                <div class="form-section">
                    <h3>üéØ Anzeigelogik</h3>
                    
                    <div class="form-group">
                        <label for="maxStock">Maximaler Lagerbestand f√ºr Anzeige:</label>
                        <input type="number" id="maxStock" value="10" min="1" max="50">
                    </div>

                    <div class="form-group">
                        <label for="showZero">Bei Lagerbestand 0 anzeigen:</label>
                        <select id="showZero">
                            <option value="false">Nein - verstecken</option>
                            <option value="true">Ja - "Ausverkauft" zeigen</option>
                        </select>
                    </div>

                    <div class="form-group" id="soldOutTextGroup" style="display: none;">
                        <label for="textSoldOut">Text bei Ausverkauf:</label>
                        <input type="text" id="textSoldOut" value="Ausverkauft">
                    </div>
                </div>

                <div class="form-section">
                    <h3>üìä Lagerbestand-Stufen</h3>
                    
                    <div class="form-group">
                        <label for="lowThreshold">Niedrig bis zu (St√ºck):</label>
                        <input type="number" id="lowThreshold" value="3" min="1" max="20">
                        <small style="color: #666; font-size: 12px;">1 bis X St√ºck = Niedrige Stufe (Rot)</small>
                    </div>

                    <div class="form-group">
                        <label for="mediumThreshold">Mittel bis zu (St√ºck):</label>
                        <input type="number" id="mediumThreshold" value="6" min="2" max="30">
                        <small style="color: #666; font-size: 12px;">Nach niedrig bis X St√ºck = Mittlere Stufe (Orange)</small>
                    </div>

                    <div style="margin-top: 10px; padding: 10px; background: #e7f3ff; border-radius: 6px; font-size: 12px; color: #0066cc;">
                        <strong>Automatisch:</strong> √úber <span id="autoHighThreshold">6</span> St√ºck = Hohe Stufe (Gr√ºn)
                    </div>
                </div>

                <div class="form-section">
                    <h3>üí¨ Text-Einstellungen</h3>
                    
                    <div class="form-group">
                        <label for="textBefore">Text vor Zahl:</label>
                        <input type="text" id="textBefore" value="Nur noch">
                    </div>

                    <div class="form-group">
                        <label for="textAfter">Text nach Zahl:</label>
                        <input type="text" id="textAfter" value="St√ºck verf√ºgbar!">
                    </div>
                </div>

                <div class="form-section">
                    <h3>üé® Styling - Niedrig (1-<span id="lowRangeDisplay">3</span> St√ºck)</h3>
                    
                    <div class="form-group">
                        <label for="lowIcon">Icon/Emoji:</label>
                        <input type="text" id="lowIcon" value="‚ö†Ô∏è" maxlength="5">
                    </div>

                    <div class="form-group">
                        <label for="lowBg">Hintergrundfarbe:</label>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <input type="color" id="lowBg" value="#fff5f5" class="color-input">
                            <label style="margin: 0; font-size: 12px; display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" id="lowBgTransparent" style="width: auto;"> Transparent
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="lowBorder">Rahmenfarbe:</label>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <input type="color" id="lowBorder" value="#dc3545" class="color-input">
                            <label style="margin: 0; font-size: 12px; display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" id="lowBorderTransparent" style="width: auto;"> Transparent
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="lowNumberColor">Zahlenfarbe:</label>
                        <input type="color" id="lowNumberColor" value="#dc3545" class="color-input">
                    </div>

                    <div class="form-group">
                        <label for="lowTextColor">Textfarbe:</label>
                        <input type="color" id="lowTextColor" value="#333333" class="color-input">
                    </div>
                </div>

                <div class="form-section">
                    <h3>üî• Styling - Mittel (<span id="mediumRangeDisplay">4-6</span> St√ºck)</h3>
                    
                    <div class="form-group">
                        <label for="mediumIcon">Icon/Emoji:</label>
                        <input type="text" id="mediumIcon" value="üî•" maxlength="5">
                    </div>

                    <div class="form-group">
                        <label for="mediumBg">Hintergrundfarbe:</label>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <input type="color" id="mediumBg" value="#fff8f0" class="color-input">
                            <label style="margin: 0; font-size: 12px; display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" id="mediumBgTransparent" style="width: auto;"> Transparent
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="mediumBorder">Rahmenfarbe:</label>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <input type="color" id="mediumBorder" value="#fd7e14" class="color-input">
                            <label style="margin: 0; font-size: 12px; display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" id="mediumBorderTransparent" style="width: auto;"> Transparent
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="mediumNumberColor">Zahlenfarbe:</label>
                        <input type="color" id="mediumNumberColor" value="#fd7e14" class="color-input">
                    </div>

                    <div class="form-group">
                        <label for="mediumTextColor">Textfarbe:</label>
                        <input type="color" id="mediumTextColor" value="#333333" class="color-input">
                    </div>
                </div>

                <div class="form-section">
                    <h3>üì¶ Styling - Hoch (<span id="highRangeDisplay">7-10</span> St√ºck)</h3>
                    
                    <div class="form-group">
                        <label for="highIcon">Icon/Emoji:</label>
                        <input type="text" id="highIcon" value="üì¶" maxlength="5">
                    </div>

                    <div class="form-group">
                        <label for="highBg">Hintergrundfarbe:</label>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <input type="color" id="highBg" value="#f8fff8" class="color-input">
                            <label style="margin: 0; font-size: 12px; display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" id="highBgTransparent" style="width: auto;"> Transparent
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="highBorder">Rahmenfarbe:</label>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <input type="color" id="highBorder" value="#28a745" class="color-input">
                            <label style="margin: 0; font-size: 12px; display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" id="highBorderTransparent" style="width: auto;"> Transparent
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="highNumberColor">Zahlenfarbe:</label>
                        <input type="color" id="highNumberColor" value="#28a745" class="color-input">
                    </div>

                    <div class="form-group">
                        <label for="highTextColor">Textfarbe:</label>
                        <input type="color" id="highTextColor" value="#333333" class="color-input">
                    </div>
                </div>

                <div class="form-section">
                    <h3>üìê Layout</h3>
                    
                    <div class="form-group">
                        <label for="alignment">Ausrichtung:</label>
                        <select id="alignment">
                            <option value="left">Links</option>
                            <option value="center">Zentriert</option>
                            <option value="right">Rechts</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>√Ñu√üere Abst√§nde (Margin):</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 5px;">
                            <div>
                                <label for="marginTop" style="font-size: 12px; margin-bottom: 3px;">Oben (px):</label>
                                <input type="number" id="marginTop" value="20" min="0" max="100">
                            </div>
                            <div>
                                <label for="marginRight" style="font-size: 12px; margin-bottom: 3px;">Rechts (px):</label>
                                <input type="number" id="marginRight" value="0" min="0" max="100">
                            </div>
                            <div>
                                <label for="marginBottom" style="font-size: 12px; margin-bottom: 3px;">Unten (px):</label>
                                <input type="number" id="marginBottom" value="20" min="0" max="100">
                            </div>
                            <div>
                                <label for="marginLeft" style="font-size: 12px; margin-bottom: 3px;">Links (px):</label>
                                <input type="number" id="marginLeft" value="0" min="0" max="100">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Innere Abst√§nde (Padding):</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 5px;">
                            <div>
                                <label for="paddingTop" style="font-size: 12px; margin-bottom: 3px;">Oben (px):</label>
                                <input type="number" id="paddingTop" value="12" min="0" max="50">
                            </div>
                            <div>
                                <label for="paddingRight" style="font-size: 12px; margin-bottom: 3px;">Rechts (px):</label>
                                <input type="number" id="paddingRight" value="18" min="0" max="50">
                            </div>
                            <div>
                                <label for="paddingBottom" style="font-size: 12px; margin-bottom: 3px;">Unten (px):</label>
                                <input type="number" id="paddingBottom" value="12" min="0" max="50">
                            </div>
                            <div>
                                <label for="paddingLeft" style="font-size: 12px; margin-bottom: 3px;">Links (px):</label>
                                <input type="number" id="paddingLeft" value="18" min="0" max="50">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>üé¨ Animationen</h3>
                    
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                            <input type="checkbox" id="enableFadeIn" style="width: auto;">
                            <span>Fade-In Animation beim Laden</span>
                        </label>
                        <small style="color: #666; font-size: 12px;">Alert erscheint sanft beim Seitenaufruf</small>
                    </div>

                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                            <input type="checkbox" id="enablePulse" style="width: auto;">
                            <span>Pulse-Effekt</span>
                        </label>
                        <small style="color: #666; font-size: 12px;">Sanftes Pulsieren f√ºr mehr Aufmerksamkeit</small>
                    </div>
                </div>
            </div>

            <div class="preview-panel">
                <h2 class="panel-title">üëÄ Live Vorschau</h2>
                
                <div class="preview-area">
                    <div id="stockPreview">
                        <!-- Preview wird hier geladen -->
                    </div>
                </div>

                <div class="stock-example">
                    <strong>Beispiele f√ºr verschiedene Lagerst√§nde:</strong>
                </div>

                <div id="exampleHigh" class="stock-example"></div>
                <div id="exampleMedium" class="stock-example"></div>
                <div id="exampleLow" class="stock-example"></div>
                <div id="exampleSoldOut" class="stock-example" style="display: none;"></div>
                
                <div class="code-section">
                    <h3 style="color: #007bff; margin-bottom: 15px; font-size: 1.1em;">üìã Shopify Liquid Code</h3>
                    
                    <div class="info-box">
                        <h4>So verwendest du den Code:</h4>
                        <p>1. Kopiere den unten stehenden Code</p>
                        <p>2. Gehe zu Shopify ‚Üí Themes ‚Üí Customize ‚Üí Produktseite</p>
                        <p>3. F√ºge eine "Custom Liquid" Section hinzu</p>
                        <p>4. F√ºge den Code ein und speichere</p>
                    </div>

                    <div class="code-container" id="codeContainer">
                        <button class="copy-button" onclick="copyCode()">Kopieren</button>
                        <pre id="liquidCode"><!-- Code wird hier generiert --></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Alle Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = document.querySelectorAll('input, select');
            inputs.forEach(function(input) {
                input.addEventListener('input', updateAll);
                input.addEventListener('change', updateAll);
            });
            
            // Spezielle Event Listener f√ºr Transparenz-Checkboxen
            const transparencyBoxes = document.querySelectorAll('input[type="checkbox"][id*="Transparent"]');
            transparencyBoxes.forEach(function(checkbox) {
                checkbox.addEventListener('change', function() {
                    // Deaktiviere/aktiviere den entsprechenden Color Input
                    const colorInputId = this.id.replace('Transparent', '');
                    const colorInput = document.getElementById(colorInputId);
                    if (colorInput) {
                        colorInput.disabled = this.checked;
                        colorInput.style.opacity = this.checked ? '0.5' : '1';
                    }
                    updateAll();
                });
            });
            
            // Initial update
            updateAll();
        });

        function updateAll() {
            // Show/hide sold out text input
            const showZero = document.getElementById('showZero').value === 'true';
            const soldOutTextGroup = document.getElementById('soldOutTextGroup');
            if (soldOutTextGroup) {
                soldOutTextGroup.style.display = showZero ? 'block' : 'none';
            }
            
            // Update threshold displays
            updateThresholdDisplays();
            
            updatePreview();
            updateCode();
        }

        function updateThresholdDisplays() {
            const lowThreshold = parseInt(document.getElementById('lowThreshold').value) || 3;
            const mediumThreshold = parseInt(document.getElementById('mediumThreshold').value) || 6;
            const maxStock = parseInt(document.getElementById('maxStock').value) || 10;
            
            // Validierung und Auto-Korrektur
            const lowInput = document.getElementById('lowThreshold');
            const mediumInput = document.getElementById('mediumThreshold');
            const maxStockInput = document.getElementById('maxStock');
            
            let correctedLow = lowThreshold;
            let correctedMedium = mediumThreshold;
            let correctedMax = maxStock;
            
            // Stelle sicher, dass medium > low
            if (correctedMedium <= correctedLow) {
                correctedMedium = correctedLow + 1;
                if (mediumInput) {
                    mediumInput.value = correctedMedium;
                    mediumInput.style.borderColor = '#fd7e14';
                    setTimeout(function() { mediumInput.style.borderColor = '#e9ecef'; }, 1000);
                }
            }
            
            // Stelle sicher, dass max > medium
            if (correctedMax <= correctedMedium) {
                correctedMax = correctedMedium + 1;
                if (maxStockInput) {
                    maxStockInput.value = correctedMax;
                    maxStockInput.style.borderColor = '#fd7e14';
                    setTimeout(function() { maxStockInput.style.borderColor = '#e9ecef'; }, 1000);
                }
            }
            
            // Update range displays in section headers
            const lowDisplay = document.getElementById('lowRangeDisplay');
            const mediumDisplay = document.getElementById('mediumRangeDisplay');
            const highDisplay = document.getElementById('highRangeDisplay');
            const autoHigh = document.getElementById('autoHighThreshold');
            
            if (lowDisplay) lowDisplay.textContent = '1-' + correctedLow;
            if (mediumDisplay) mediumDisplay.textContent = (correctedLow + 1) + '-' + correctedMedium;
            if (highDisplay) highDisplay.textContent = (correctedMedium + 1) + '-' + correctedMax;
            if (autoHigh) autoHigh.textContent = correctedMedium;
        }

        function updatePreview() {
            const maxStock = parseInt(document.getElementById('maxStock').value) || 10;
            const lowThreshold = parseInt(document.getElementById('lowThreshold').value) || 3;
            const mediumThreshold = parseInt(document.getElementById('mediumThreshold').value) || 6;
            const showZero = document.getElementById('showZero').value === 'true';
            const alignment = document.getElementById('alignment').value || 'left';

            // Hauptvorschau
            const sampleStock = Math.floor(maxStock * 0.6);
            const previewContainer = document.getElementById('stockPreview');
            previewContainer.innerHTML = generateAlert(sampleStock, 'sample');
            
            // Update der Preview-Area Ausrichtung
            const previewArea = document.querySelector('.preview-area');
            if (previewArea) {
                if (alignment === 'center') {
                    previewArea.style.justifyContent = 'center';
                } else if (alignment === 'right') {
                    previewArea.style.justifyContent = 'flex-end';
                } else {
                    previewArea.style.justifyContent = 'flex-start';
                }
            }

            // Dynamische Beispiele f√ºr jede Stufe
            const lowExample = Math.max(1, Math.floor(lowThreshold / 2)); // Mitte der niedrigen Stufe
            const mediumExample = Math.max(lowThreshold + 1, Math.floor((lowThreshold + mediumThreshold) / 2)); // Mitte der mittleren Stufe
            const highExample = Math.max(mediumThreshold + 1, Math.min(maxStock, mediumThreshold + 2)); // Anfang der hohen Stufe

            document.getElementById('exampleHigh').innerHTML = generateAlert(highExample, 'example');
            document.getElementById('exampleMedium').innerHTML = generateAlert(mediumExample, 'example');
            document.getElementById('exampleLow').innerHTML = generateAlert(lowExample, 'example');
            
            const soldOutExample = document.getElementById('exampleSoldOut');
            if (showZero) {
                soldOutExample.style.display = 'block';
                soldOutExample.innerHTML = generateAlert(0, 'example');
            } else {
                soldOutExample.style.display = 'none';
            }
        }

        function generateAlert(stock, type) {
            const maxStock = parseInt(document.getElementById('maxStock').value) || 10;
            const lowThreshold = parseInt(document.getElementById('lowThreshold').value) || 3;
            const mediumThreshold = parseInt(document.getElementById('mediumThreshold').value) || 6;
            const textBefore = document.getElementById('textBefore').value || 'Nur noch';
            const textAfter = document.getElementById('textAfter').value || 'St√ºck verf√ºgbar!';
            const textSoldOut = document.getElementById('textSoldOut').value || 'Ausverkauft';
            const showZero = document.getElementById('showZero').value === 'true';
            const alignment = document.getElementById('alignment').value || 'left';
            
            // Margin-Werte
            const marginTop = document.getElementById('marginTop').value || '20';
            const marginRight = document.getElementById('marginRight').value || '0';
            const marginBottom = document.getElementById('marginBottom').value || '20';
            const marginLeft = document.getElementById('marginLeft').value || '0';
            
            // Padding-Werte
            const paddingTop = document.getElementById('paddingTop').value || '12';
            const paddingRight = document.getElementById('paddingRight').value || '18';
            const paddingBottom = document.getElementById('paddingBottom').value || '12';
            const paddingLeft = document.getElementById('paddingLeft').value || '18';

            // Animationen
            const enableFadeIn = document.getElementById('enableFadeIn').checked;
            const enablePulse = document.getElementById('enablePulse').checked;

            if (stock > maxStock) return '';
            if (stock === 0 && !showZero) return '';

            let icon, bg, border, numberColor, textColor;

            if (stock === 0 || stock <= lowThreshold) {
                icon = document.getElementById('lowIcon').value || '';
                bg = document.getElementById('lowBgTransparent').checked ? 'transparent' : (document.getElementById('lowBg').value || '#fff5f5');
                border = document.getElementById('lowBorderTransparent').checked ? 'transparent' : (document.getElementById('lowBorder').value || '#dc3545');
                numberColor = document.getElementById('lowNumberColor').value || '#dc3545';
                textColor = document.getElementById('lowTextColor').value || '#333333';
            } else if (stock <= mediumThreshold) {
                icon = document.getElementById('mediumIcon').value || '';
                bg = document.getElementById('mediumBgTransparent').checked ? 'transparent' : (document.getElementById('mediumBg').value || '#fff8f0');
                border = document.getElementById('mediumBorderTransparent').checked ? 'transparent' : (document.getElementById('mediumBorder').value || '#fd7e14');
                numberColor = document.getElementById('mediumNumberColor').value || '#fd7e14';
                textColor = document.getElementById('mediumTextColor').value || '#333333';
            } else {
                icon = document.getElementById('highIcon').value || '';
                bg = document.getElementById('highBgTransparent').checked ? 'transparent' : (document.getElementById('highBg').value || '#f8fff8');
                border = document.getElementById('highBorderTransparent').checked ? 'transparent' : (document.getElementById('highBorder').value || '#28a745');
                numberColor = document.getElementById('highNumberColor').value || '#28a745';
                textColor = document.getElementById('highTextColor').value || '#333333';
            }

            const displayText = stock === 0 ? textSoldOut : textBefore + ' ' + stock + ' ' + textAfter;
            const margins = type === 'sample' ? 'margin: ' + marginTop + 'px ' + marginRight + 'px ' + marginBottom + 'px ' + marginLeft + 'px;' : 'margin: 5px 0;';
            const paddings = 'padding: ' + paddingTop + 'px ' + paddingRight + 'px ' + paddingBottom + 'px ' + paddingLeft + 'px;';

            // Animation CSS
            let animationCSS = '';
            let animationClass = '';
            
            if (enableFadeIn || enablePulse) {
                animationClass = 'stock-alert-' + Math.random().toString(36).substr(2, 9);
                animationCSS = '<style>';
                
                if (enableFadeIn) {
                    animationCSS += '.' + animationClass + ' { animation: fadeIn 1s ease-in-out; } ';
                    animationCSS += '@keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } } ';
                }
                
                if (enablePulse) {
                    animationCSS += '.' + animationClass + ' { animation: ' + (enableFadeIn ? 'fadeIn 1s ease-in-out, ' : '') + 'pulse 2s ease-in-out infinite; } ';
                    animationCSS += '@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } } ';
                }
                
                animationCSS += '</style>';
            }

            return animationCSS + '<div style="text-align: ' + alignment + '; ' + margins + '">' +
                   '<div class="' + animationClass + '" style="display: inline-flex; align-items: center; background: ' + bg + '; border: 2px solid ' + border + '; border-radius: 25px; ' + paddings + ' font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;">' +
                   '<span style="font-size: 18px; margin-right: 8px;">' + icon + '</span>' +
                   '<span style="font-size: 14px; color: ' + textColor + '; font-weight: 600;">' +
                   (stock === 0 ? '<strong style="color: ' + numberColor + '; font-size: 16px; font-weight: 700;">' + displayText + '</strong>' : 
                   textBefore + ' <strong style="color: ' + numberColor + '; font-size: 16px; font-weight: 700;">' + stock + '</strong> ' + textAfter) +
                   '</span></div></div>';
        }

        function updateCode() {
            const maxStock = document.getElementById('maxStock').value || '10';
            const lowThreshold = parseInt(document.getElementById('lowThreshold').value) || 3;
            const mediumThreshold = parseInt(document.getElementById('mediumThreshold').value) || 6;
            const textBefore = document.getElementById('textBefore').value || 'Nur noch';
            const textAfter = document.getElementById('textAfter').value || 'St√ºck verf√ºgbar!';
            const textSoldOut = document.getElementById('textSoldOut').value || 'Ausverkauft';
            const showZero = document.getElementById('showZero').value === 'true';
            const alignment = document.getElementById('alignment').value || 'left';
            
            // Margin-Werte
            const marginTop = document.getElementById('marginTop').value || '20';
            const marginRight = document.getElementById('marginRight').value || '0';
            const marginBottom = document.getElementById('marginBottom').value || '20';
            const marginLeft = document.getElementById('marginLeft').value || '0';
            
            // Padding-Werte
            const paddingTop = document.getElementById('paddingTop').value || '12';
            const paddingRight = document.getElementById('paddingRight').value || '18';
            const paddingBottom = document.getElementById('paddingBottom').value || '12';
            const paddingLeft = document.getElementById('paddingLeft').value || '18';

            // Animationen
            const enableFadeIn = document.getElementById('enableFadeIn').checked;
            const enablePulse = document.getElementById('enablePulse').checked;

            const highIcon = document.getElementById('highIcon').value || '';
            const highBg = document.getElementById('highBgTransparent').checked ? 'transparent' : (document.getElementById('highBg').value || '#f8fff8');
            const highBorder = document.getElementById('highBorderTransparent').checked ? 'transparent' : (document.getElementById('highBorder').value || '#28a745');
            const highNumberColor = document.getElementById('highNumberColor').value || '#28a745';
            const highTextColor = document.getElementById('highTextColor').value || '#333333';

            const mediumIcon = document.getElementById('mediumIcon').value || '';
            const mediumBg = document.getElementById('mediumBgTransparent').checked ? 'transparent' : (document.getElementById('mediumBg').value || '#fff8f0');
            const mediumBorder = document.getElementById('mediumBorderTransparent').checked ? 'transparent' : (document.getElementById('mediumBorder').value || '#fd7e14');
            const mediumNumberColor = document.getElementById('mediumNumberColor').value || '#fd7e14';
            const mediumTextColor = document.getElementById('mediumTextColor').value || '#333333';

            const lowIcon = document.getElementById('lowIcon').value || '';
            const lowBg = document.getElementById('lowBgTransparent').checked ? 'transparent' : (document.getElementById('lowBg').value || '#fff5f5');
            const lowBorder = document.getElementById('lowBorderTransparent').checked ? 'transparent' : (document.getElementById('lowBorder').value || '#dc3545');
            const lowNumberColor = document.getElementById('lowNumberColor').value || '#dc3545';
            const lowTextColor = document.getElementById('lowTextColor').value || '#333333';

            let code = '{% comment %} Stock Alert Generator {% endcomment %}\n\n';
            
            // CSS f√ºr Animationen hinzuf√ºgen falls aktiviert
            if (enableFadeIn || enablePulse) {
                code += '<style>\n';
                if (enableFadeIn) {
                    code += '.stock-alert { animation: fadeIn 1s ease-in-out; }\n';
                    code += '@keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }\n';
                }
                if (enablePulse) {
                    code += '.stock-alert { animation: ' + (enableFadeIn ? 'fadeIn 1s ease-in-out, ' : '') + 'pulse 2s ease-in-out infinite; }\n';
                    code += '@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }\n';
                }
                code += '</style>\n\n';
            }
            
            code += '{% liquid\n';
            code += '  assign current_variant = product.selected_or_first_available_variant\n';
            code += '  assign inventory = current_variant.inventory_quantity\n';
            code += '  assign low_threshold = ' + lowThreshold + '\n';
            code += '  assign medium_threshold = ' + mediumThreshold + '\n';
            code += '%}\n\n';
            code += '{% if inventory <= ' + maxStock + ' and inventory > 0 %}\n';
            code += '  {% if inventory <= low_threshold %}\n';
            code += '    <div style="text-align: ' + alignment + '; margin: ' + marginTop + 'px ' + marginRight + 'px ' + marginBottom + 'px ' + marginLeft + 'px;">\n';
            code += '      <div class="' + (enableFadeIn || enablePulse ? 'stock-alert ' : '') + '" style="display: inline-flex; align-items: center; background: ' + lowBg + '; border: 2px solid ' + lowBorder + '; border-radius: 25px; padding: ' + paddingTop + 'px ' + paddingRight + 'px ' + paddingBottom + 'px ' + paddingLeft + 'px;">\n';
            code += '        <span style="font-size: 18px; margin-right: 8px;">' + lowIcon + '</span>\n';
            code += '        <span style="font-size: 14px; color: ' + lowTextColor + '; font-weight: 600;">\n';
            code += '          ' + textBefore + ' <strong style="color: ' + lowNumberColor + ';">{{ inventory }}</strong> ' + textAfter + '\n';
            code += '        </span>\n';
            code += '      </div>\n';
            code += '    </div>\n';
            code += '  {% elsif inventory <= medium_threshold %}\n';
            code += '    <div style="text-align: ' + alignment + '; margin: ' + marginTop + 'px ' + marginRight + 'px ' + marginBottom + 'px ' + marginLeft + 'px;">\n';
            code += '      <div class="' + (enableFadeIn || enablePulse ? 'stock-alert ' : '') + '" style="display: inline-flex; align-items: center; background: ' + mediumBg + '; border: 2px solid ' + mediumBorder + '; border-radius: 25px; padding: ' + paddingTop + 'px ' + paddingRight + 'px ' + paddingBottom + 'px ' + paddingLeft + 'px;">\n';
            code += '        <span style="font-size: 18px; margin-right: 8px;">' + mediumIcon + '</span>\n';
            code += '        <span style="font-size: 14px; color: ' + mediumTextColor + '; font-weight: 600;">\n';
            code += '          ' + textBefore + ' <strong style="color: ' + mediumNumberColor + ';">{{ inventory }}</strong> ' + textAfter + '\n';
            code += '        </span>\n';
            code += '      </div>\n';
            code += '    </div>\n';
            code += '  {% else %}\n';
            code += '    <div style="text-align: ' + alignment + '; margin: ' + marginTop + 'px ' + marginRight + 'px ' + marginBottom + 'px ' + marginLeft + 'px;">\n';
            code += '      <div class="' + (enableFadeIn || enablePulse ? 'stock-alert ' : '') + '" style="display: inline-flex; align-items: center; background: ' + highBg + '; border: 2px solid ' + highBorder + '; border-radius: 25px; padding: ' + paddingTop + 'px ' + paddingRight + 'px ' + paddingBottom + 'px ' + paddingLeft + 'px;">\n';
            code += '        <span style="font-size: 18px; margin-right: 8px;">' + highIcon + '</span>\n';
            code += '        <span style="font-size: 14px; color: ' + highTextColor + '; font-weight: 600;">\n';
            code += '          ' + textBefore + ' <strong style="color: ' + highNumberColor + ';">{{ inventory }}</strong> ' + textAfter + '\n';
            code += '        </span>\n';
            code += '      </div>\n';
            code += '    </div>\n';
            code += '  {% endif %}\n';
            
            if (showZero) {
                code += '{% elsif inventory == 0 %}\n';
                code += '  <div style="text-align: ' + alignment + '; margin: ' + marginTop + 'px ' + marginRight + 'px ' + marginBottom + 'px ' + marginLeft + 'px;">\n';
                code += '    <div class="' + (enableFadeIn || enablePulse ? 'stock-alert ' : '') + '" style="display: inline-flex; align-items: center; background: ' + lowBg + '; border: 2px solid ' + lowBorder + '; border-radius: 25px; padding: ' + paddingTop + 'px ' + paddingRight + 'px ' + paddingBottom + 'px ' + paddingLeft + 'px;">\n';
                code += '      <span style="font-size: 18px; margin-right: 8px;">' + lowIcon + '</span>\n';
                code += '      <span style="font-size: 14px; color: ' + lowTextColor + '; font-weight: 600;">\n';
                code += '        <strong style="color: ' + lowNumberColor + ';">' + textSoldOut + '</strong>\n';
                code += '      </span>\n';
                code += '    </div>\n';
                code += '  </div>\n';
            }
            
            code += '{% endif %}';

            const codeElement = document.getElementById('liquidCode');
            if (codeElement) {
                codeElement.textContent = code;
            }
        }

        function copyCode() {
            const codeElement = document.getElementById('liquidCode');
            const textArea = document.createElement('textarea');
            textArea.value = codeElement.textContent;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);

            const button = document.querySelector('.copy-button');
            const originalText = button.textContent;
            button.textContent = 'Kopiert! ‚úì';
            button.classList.add('copied');

            setTimeout(function() {
                button.textContent = originalText;
                button.classList.remove('copied');
            }, 2000);
        }
    </script>
</body>
</html>
